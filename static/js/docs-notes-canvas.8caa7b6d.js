(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"./docs/notes/canvas.md":function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return u});var a=t("./node_modules/react/index.js"),o=t.n(a),r=t("./node_modules/@mdx-js/tag/dist/index.js");function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function s(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,n){return!n||"object"!==c(n)&&"function"!==typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,n){return(i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var u=function(e){function n(e){var t;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=p(this,l(n).call(this,e))).layout=null,t}var t,a,c;return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)}(n,o.a.Component),t=n,(a=[{key:"render",value:function(){var e=this.props,n=e.components;m(e,["components"]);return o.a.createElement(r.MDXTag,{name:"wrapper",components:n},o.a.createElement(r.MDXTag,{name:"h1",components:n,props:{id:"canvas"}},"Canvas"),o.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"canvas-is-not-origin-clean"}},"canvas is not origin-clean"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"canvas")," \u52a0\u8f7d\u4e86\u8fdc\u7a0b\u56fe\u7247\u540e\u8c03\u7528 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"captureStream")," \u51fa\u9519\uff0c\u63d0\u793a ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"canvas is not origin-clean")),o.a.createElement(r.MDXTag,{name:"p",components:n},"\u5177\u4f53\u539f\u56e0\uff1a",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://www.w3.org/TR/2011/WD-html5-20110405/the-canvas-element.html"}},"https://www.w3.org/TR/2011/WD-html5-20110405/the-canvas-element.html")),o.a.createElement(r.MDXTag,{name:"p",components:n},"\u89e3\u51b3\u65b9\u6cd5\uff1a\n1. \u5c06\u56fe\u7247\u6570\u636e\u83b7\u53d6\u5230\u672c\u5730\u7136\u540e\u901a\u8fc7 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"URL.createObjectURL"),"\n2. \u8bbe\u7f6e Image crossOrigin \u5c5e\u6027"),o.a.createElement(r.MDXTag,{name:"h3",components:n,props:{id:"1-urlcreateobjecturl"}},"1. URL.createObjectURL"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-js"}},"const loadImg = (src) => {\n  return new Promise((resolve) => {\n    fetch(src).then((response) => {\n    const img = new Image();\n    img.onload = () => {\n      resolve(img);\n    };\n    img.src = URL.createObjectURL(response.blob());\n    window.setTimeout(() => {\n      resolve(null);\n    }, 30 * 1000);\n  }).catch(() => resolve(null)));\n};\n")),o.a.createElement(r.MDXTag,{name:"h3",components:n,props:{id:"2-\u8bbe\u7f6e-image-crossorigin-\u5c5e\u6027"}},"2. \u8bbe\u7f6e Image crossOrigin \u5c5e\u6027"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-js"}},"const loadImg = (blob) => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => {\n      resolve(img);\n    };\n    img.src = src;\n    window.setTimeout(() => {\n      resolve(null);\n    }, 30 * 1000);\n  });\n};\n")),o.a.createElement(r.MDXTag,{name:"p",components:n},"\u53c2\u8003\u8d44\u6599\uff1a\n1. ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://juejin.im/post/5aefc0456fb9a07abc29d36d"}},"\u57fa\u4e8ecanvas\u751f\u6210\u56fe\u7247"),"\n2. ",o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"p",props:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTML/CORS_enabled_image"}},"MDN: \u542f\u7528\u4e86 CORS \u7684\u56fe\u7247")),o.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"capturestream-\u81ea\u52a8\u64ad\u653e"}},"captureStream \u81ea\u52a8\u64ad\u653e"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"captureStream")," \u751f\u6210\u7684 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"stream")," \u65e0\u6cd5\u81ea\u52a8\u64ad\u653e\u3002"),o.a.createElement(r.MDXTag,{name:"p",components:n},o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"captureStream")," \u63a5\u53e3\u8c03\u7528\u65f6\u5165\u53c2\u662f\u6700\u5927\u5e27\u7387\uff0c",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"canvas")," \u5728\u53d8\u5316\u7684\u65f6\u5019\u624d\u4f1a\u4ea7\u751f\u65b0\u7684\u5e27\uff0c\u6240\u4ee5\u4e00\u4e2a\u9759\u6b62\u7684 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"canvas")," \u53ea\u4f1a\u4ea7\u751f\u4e00\u5e27\uff0c\u5bfc\u81f4 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"stream")," \u65e0\u6cd5\u81ea\u52a8\u64ad\u653e\u3002"),o.a.createElement(r.MDXTag,{name:"p",components:n},"\u542f\u52a8\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5237\u65b0 ",o.a.createElement(r.MDXTag,{name:"inlineCode",components:n,parentName:"p"},"canvas")," \u7684\u5de6\u4e0a\u89d2\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002"),o.a.createElement(r.MDXTag,{name:"pre",components:n},o.a.createElement(r.MDXTag,{name:"code",components:n,parentName:"pre",props:{className:"language-js"}},"const ctx = document.getElementById('canvas').getContext('2d');\n\nwindow.setInterval(()=>{\n  ctx.fillStyle = '#fff';\n  ctx.fillRect(0, 0, 1, 1);\n}, 100);\n")),o.a.createElement(r.MDXTag,{name:"h2",components:n,props:{id:"\u6027\u80fd\u4f18\u5316"}},"\u6027\u80fd\u4f18\u5316"),o.a.createElement(r.MDXTag,{name:"ol",components:n},o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ol"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas"}},"https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas")),o.a.createElement(r.MDXTag,{name:"li",components:n,parentName:"ol"},o.a.createElement(r.MDXTag,{name:"a",components:n,parentName:"li",props:{href:"https://www.html5rocks.com/zh/tutorials/canvas/performance/#toc-clear-canvas"}},"https://www.html5rocks.com/zh/tutorials/canvas/performance/#toc-clear-canvas"))))}}])&&s(t.prototype,a),c&&s(t,c),n}();u.__docgenInfo={description:"",methods:[],displayName:"MDXContent"}}}]);
//# sourceMappingURL=docs-notes-canvas.9f054662abe7faa3855c.js.map